import { ArticleLayout } from '@/components/ArticleLayout'
import Image from 'next/future/image'
import designSystem from './planetaria-design-system.png'

export const meta = {
  author: 'Adam Wathan',
  date: '2021-09-05',
  title: 'クリーンアーキテクチャー',
  description: 'クリーンアーキテクチャー'
}

export default (props) => <ArticleLayout meta={meta} {...props} />


![https://blog.tai2.net/images/CleanArchitecture.jpg](https://blog.tai2.net/images/CleanArchitecture.jpg)

## ■クリーンアーキテクチャとは

どんなWebアプリケーションやソフトウェアでも普遍的に使えるアーキテクチャ。

仕様変更に強く、1つの変更が周りに与える影響が限りなく小さい。

> Conforming to these simple rules is not hard, and will save you a lot of headaches going forward. By separating the software into layers, and conforming to The Dependency Rule, you will create a system that is intrinsically testable, with all the benefits that implies. When any of the external parts of the system become obsolete, like the database, or the web framework, you can replace those obsolete elements with a minimum of fuss.
>

### ■クリーンアーキテクチャのメリット

1. フレームワーク独立
    1. フレームワークの限定されたルールという制約に囚われない
2. テスト可能
3. UI独立
4. DB独立
5. 外部機能独立

### ■クリーンアーキテクチャのデメリット

- コード量・ファイル数が増加
- 小規模スケールだと費用対効果に疑問

### クリーンアーキテクチャの具体的な構成図

![https://lh3.googleusercontent.com/-dIvHq6z2OqQ/YMGRFmwIkII/AAAAAAAAMac/RFhQALgVRGkd44GnxKgQLOq4bpf7S9nWQCLcBGAsYHQ/image.png](https://lh3.googleusercontent.com/-dIvHq6z2OqQ/YMGRFmwIkII/AAAAAAAAMac/RFhQALgVRGkd44GnxKgQLOq4bpf7S9nWQCLcBGAsYHQ/image.png)

## ■Entities

ビジネスルールのためのデータ構造やメソッドを持つオブジェクト。

最も大事なレイヤーであり、アプリケーションの仕様変更がEntitiesレイヤーへ影響を及ぼすべきではない

## ■UseCases

Entities層よりも詳しく、アプリケーション独自のロジックを含むレイヤー。

このレイヤーの変更においてもEntitiesレイヤーへ影響を与えるべきではない。

## ■Interface Adapters

UseCasesレイヤーとFrameworks&Drivers (DBやAPI)を繋ぐレイヤーのこと。ユーザの入力をアプリケーションに伝えたり、アプリケーションが外部と接する手段を提供する。

## ■Frameworks & Drivers

フレームワークやツール、データベースから構成されるレイヤーのこと。フロントエンドのUIも含め、より詳細なコードを含む。

## ■依存ルールの重要性

**レイヤー間での依存性ルールとして、常に外側→内側への依存であるべき**

- ソースコードは内側のレイヤーのみ依存することが可能
- 外側のレイヤーから内側に依存することは無い
- 外側で宣言された関数・変数・クラスを内側からは使うべきではない

そのため、重要度の高いレイヤーは低いレイヤーに依存せずに分離させることが可能

実践クリーンアーキテクチャ

[https://www.youtube.com/watch?v=BvzjpAe3d4g](https://www.youtube.com/watch?v=BvzjpAe3d4g)

本家ブログ

[Clean Coder Blog](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)

クリーンアーキテクチャの参考例

[Clean ArchitectureでAPI Serverを構築してみる - Qiita](https://qiita.com/hirotakan/items/698c1f5773a3cca6193e)

[実装クリーンアーキテクチャ - Qiita](https://qiita.com/nrslib/items/a5f902c4defc83bd46b8)

[個人開発でクリーンアーキテクチャを導入してみた](https://zenn.dev/maru44/articles/b9e07e91a0ea77)

[図解クリーンアーキテクチャ](https://www.12-technology.com/2021/06/blog-post.html)

[世界一わかりやすいClean Architecture - nuits.jp blog](https://www.nuits.jp/entry/easiest-clean-architecture-2019-09)

[5分でわかるクリーンアーキテクチャ](https://www.slideshare.net/kenjitanaka58/5-66290992)

Sansan

[ソースコードで理解するクリーンアーキテクチャ - Sansan Builders Blog](https://buildersbox.corp-sansan.com/entry/2019/07/10/110000)

メルカリ

[マイクロサービスにクリーンアーキテクチャを採用する上で考えたこと](https://engineering.mercari.com/blog/entry/2019-12-19-100000/)
